# CodeFlow - Git仓库管理系统

CodeFlow 是一个基于PHP的Web应用，用于管理GitHub仓库，提供简单直观的界面进行文件操作和Git版本控制。

## 功能特点

### 1. 初始化和认证
- GitHub令牌验证和保存
- 可选的全局密码保护
- 支持Cookie或IP认证方式

### 2. 仓库管理
- 显示GitHub仓库列表
- 克隆远程仓库
- 创建本地仓库

### 3. 文件操作
- 文件浏览和列表显示
- 文件创建/编辑/删除
- 文件夹创建/删除
- 文件上传/下载
- 文件压缩/解压
- 批量操作
- 文件重命名

### 4. Git操作
- 拉取/推送更新
- 提交更改
- 分支管理
- 分支合并
- 冲突解决

### 5. 界面功能
- 响应式设计
- 黑白主题切换
- 代码编辑器支持
- 实时保存

## 系统要求

- PHP 8.0 或更高版本
- Git 命令行工具
- Composer（PHP包管理器）
- Web服务器（Apache/Nginx）

## 安装说明

1. 请将运行目录设置为public
2. 配置config/config.php文件

## 配置说明

### GitHub令牌配置
1. 登录GitHub账号
2. 进入Settings -> Developer settings
3. 选择Personal access tokens -> Tokens (classic)
4. 点击Generate new token
5. 勾选以下权限：
   - repo (完整访问权限)
   - workflow (可选，用于工作流访问)
6. 生成并复制令牌

### 全局密码保护
- 首次访问时可以选择是否启用密码保护
- 启用后所有访问都需要输入密码
- 可以选择使用Cookie或IP进行认证

## 使用指南

### 仓库管理
1. 克隆仓库
   - 在仓库列表页面查看可用仓库
   - 点击克隆按钮将仓库克隆到本地
   - 支持创建新的本地仓库

2. 文件操作
   - 点击文件名编辑文件内容
   - 支持文件拖拽上传
   - 可以创建文件夹和文件
   - 支持文件重命名和删除
   - 可以压缩和解压文件

3. Git操作
   - 提交前可以查看变更状态
   - 支持拉取远程更新
   - 可以推送本地更改
   - 支持分支管理和合并
   - 提供冲突解决界面

### 主题切换
- 点击导航栏的主题图标切换
- 支持浅色/深色主题
- 主题偏好会被保存

## 开发说明

### 项目结构

``` plaintext
CodeFlow/
├── config/ # 配置文件
├── src/ # 源代码
│ ├── Controllers/ # 控制器
│ ├── Services/ # 服务层
│ └── Utils/ # 工具类
├── public/ # 公共访问目录
└── templates/ # 视图模板
```

### 扩展开发
1. 控制器扩展
   - 在src/Controllers/添加新控制器
   - 在路由中注册新控制器

2. 视图开发
   - 在templates/添加新模板
   - 遵循现有的模板结构

3. 服务扩展
   - 在src/Services/添加新服务类
   - 保持单一职责原则

## 安全说明

1. 文件安全
   - 所有用户输入经过过滤
   - 文件操作路径已做检查
   - 敏感操作需要验证

2. 访问控制
   - 支持全局密码保护
   - Cookie/IP认证机制
   - Git操作权限控制

## 常见问题

1. 权限问题
   - 确保项目目录可写
   - 检查.github_token权限
   - 验证Git命令可用

2. 上传限制
   - 检查PHP上传限制
   - 注意服务器空间
   - 大文件建议使用Git

## 许可证

本项目采用 MIT 许可证

## 贡献指南

欢迎提交Issue和Pull Request。在提交代码前：
1. 确保代码符合PSR规范
2. 添加必要的注释
3. 测试所有功能
4. 更新相关文档

## 鸣谢

coser